<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è©é¨™é˜²ç¯„å…¨é¢åµæ¸¬ç«™</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>

    <div class="side-menu" id="sideMenu">
        <span class="close-btn" onclick="toggleMenu()">&times;</span>
        <ul class="side-nav-links">
            <li onclick="goHome(); toggleMenu()">ğŸ  é¦–é </li>
            <li onclick="alert('åŠŸèƒ½é–‹ç™¼ä¸­ï¼'); toggleMenu()">ğŸ“š é˜²è©çŸ¥è­˜</li>
            <li onclick="window.open('https://165.npa.gov.tw/', '_blank'); toggleMenu()">ğŸš“ 165å°ˆå€</li>
        </ul>
    </div>

    <div class="menu-overlay" id="menuOverlay" onclick="toggleMenu()"></div>

    <div class="app-container">
        
        <nav class="top-nav">
            <div class="hamburger-icon" onclick="toggleMenu()">
                <span></span>
                <span></span>
                <span></span>
            </div>
            <div class="nav-logo">ğŸ›¡ï¸ é˜²è©åµæ¸¬ç«™</div>
            <div style="width: 30px;"></div> </nav>

        <div id="home-page">
            <h1>ğŸ›¡ï¸ ç§’è®€è¨Šæ¯çœŸå½</h1>
            <h1>é é›¢å—é¨™é¢¨éšª</h1>
            <p>æ•¸ä½æ™‚ä»£ï¼Œè­¦è¦ºç¬¬ä¸€<br>è²¼ä¸Šå¯ç–‘è¨Šæ¯ï¼Œç‚ºæ‚¨å³æ™‚è¨ºæ–·</p>

            <img src="hero-image.png" alt="åè©é¨™åœ–" class="hero-img">

            <button class="main-btn" onclick="startCheck()">åŸ·è¡Œå³æ™‚é¢¨éšªåˆ†æ</button>
            
            <div class="link-165" onclick="window.open('https://165.npa.gov.tw/', '_blank')">
                å‰å¾€ 165 åè©é¨™å®˜æ–¹ç¶²ç«™
            </div>
        </div>

        <div id="checker-page" style="display: none;">
            <div class="header">
                <span class="back-btn" onclick="goHome()">â—€ è¿”å›</span>
                <span>ç§’æ‡‚è©é¨™ï¼šAI è­˜ç ´å°ˆå®¶</span>
                <div style="width: 40px;"></div>
            </div>

            <div class="chat-box" id="chatBox">
                <div class="bubble bot">æ‚¨å¥½ï¼è«‹è²¼ä¸Šæ‚¨æ”¶åˆ°çš„è¨Šæ¯å…§å®¹ï¼Œæˆ–æ˜¯é»æ“Šä¸‹æ–¹çš„å¿«æ·éµæ¸¬è©¦å¸¸è¦‹è©é¨™æ¡ˆä¾‹ã€‚</div>
            </div>

            <div class="input-area">
                <div class="input-row">
                    <input type="text" id="userInput" placeholder="åœ¨æ­¤è¼¸å…¥è¨Šæ¯...">
                    <button class="send-btn" onclick="analyzeMsg()">
                        <svg viewBox="0 0 24 24" width="20" height="20" fill="currentColor">
                            <path d="M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"></path>
                        </svg>
                    </button>
                </div>
            </div>
        </div>

    </div>

    <script>
        // --- è®Šæ•¸å®£å‘Š ---
        const chatBox = document.getElementById('chatBox');
        const userInput = document.getElementById('userInput');
        let isTyping = false; 

        // --- 1. æ¼¢å ¡é¸å–®é–‹é—œé‚è¼¯ ---
        function toggleMenu() {
            const sideMenu = document.getElementById('sideMenu');
            const overlay = document.getElementById('menuOverlay');
            sideMenu.classList.toggle('active');
            overlay.classList.toggle('active');
        }

            // ä¿®æ”¹å¾Œçš„ç•«é¢åˆ‡æ›é‚è¼¯
        function startCheck() {
            // é€²å…¥åˆ†æé é¢ï¼šéš±è—é¦–é èˆ‡å°è¦½åˆ—
            document.getElementById('home-page').style.display = 'none';
            document.querySelector('.top-nav').style.display = 'none'; // éš±è—æ¼¢å ¡é¸å–®åˆ—
            document.getElementById('checker-page').style.display = 'flex';
        }

        function goHome() {
            // å›åˆ°é¦–é ï¼šé¡¯ç¤ºé¦–é èˆ‡å°è¦½åˆ—
            document.getElementById('home-page').style.display = 'flex';
            document.querySelector('.top-nav').style.display = 'flex'; // é¡¯ç¤ºæ¼¢å ¡é¸å–®åˆ—
            document.getElementById('checker-page').style.display = 'none';
        }
        // --- 3. è¨Šæ¯åˆ†æé‚è¼¯ ---
        function analyzeMsg() {
            const text = userInput.value.trim();
            if (!text || isTyping) return;

            appendMessage(text, 'user');
            userInput.value = '';
            isTyping = true; 

            setTimeout(() => {
                const keywords = ['ä¸­ç', 'é ˜å–', 'é€£çµ', 'å¸³æˆ¶ç•°å¸¸', 'è§£é™¤', 'æŠ•è³‡', 'LINE'];
                let found = keywords.filter(k => text.includes(k));

                if (found.length > 0) {
                    appendMessage(`ğŸš¨ æ³¨æ„ï¼åµæ¸¬åˆ°å¯ç–‘å­—çœ¼ï¼š[${found.join(', ')}]ã€‚é€™å…·å‚™å¼·çƒˆçš„è©é¨™ç‰¹å¾µï¼`, 'alert');
                } else {
                    appendMessage(`âœ… ç›®å‰æœªåµæ¸¬åˆ°æ˜é¡¯è©é¨™ç‰¹å¾µï¼Œä½†ä»è«‹ä¿æŒè­¦è¦ºã€‚`, 'bot');
                }
                
                setTimeout(() => { isTyping = false; }, 1500);
            }, 800);
        }

        // --- 4. æ‰“å­—æ©Ÿæ•ˆæœ ---
        function appendMessage(content, type) {
            const div = document.createElement('div');
            div.className = `bubble ${type}`;
            chatBox.appendChild(div);

            if (type === 'user') {
                div.innerText = content;
                chatBox.scrollTop = chatBox.scrollHeight;
            } else {
                let i = 0;
                div.innerText = ''; 
                function typeWriter() {
                    if (i < content.length) {
                        div.innerText += content.charAt(i);
                        i++;
                        chatBox.scrollTop = chatBox.scrollHeight;
                        setTimeout(typeWriter, 30);
                    }
                }
                typeWriter();
            }
        }

        // æ”¯æ´ Enter éµ
        userInput.addEventListener("keypress", function(event) {
            if (event.key === "Enter") {
                analyzeMsg();
            }
        });
    </script>
</body>
</html>